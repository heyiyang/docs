<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="/docs/">
    <meta http-equiv="refresh" content="0; url=http://learn.koding.com">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>SSH Into Your VM - Koding Community Docs
    </title>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body class="content-wrap article-detail"><a href="https://github.com/koding/docs"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
    <header class="header">
      <h1>Moves to Learn.Koding.com</h1>
      <h1>SSH Into Your VM</h1>
    </header>
    <div id="sidebar"><ul>
<li><a href="https://koding.com/">Koding</a></li>
<li><a href="/docs/">Home</a></li>
<li><a href="/docs/guides/koding-overview/">Koding Overview</a></li>
<li><a href="/docs/#frequently-asked-questions">FAQ</a></li>
<li><a href="/docs/#feature-exploration">Feature Exploration</a></li>
<li><a href="https://github.com/koding/docs/wiki">Wiki</a></li>
<li><a href="https://github.com/koding/docs/issues/new">Submit an Issue</a></li>
</ul>

      <h4>Guide Links</h4>
      <ul>
        <li><a href="/docs/guides/ssh-into-your-vm/#video">Video</a>
        </li>
        <li><a href="/docs/guides/ssh-into-your-vm/#what-you-will-need">What you will need</a>
        </li>
        <li><a href="/docs/guides/ssh-into-your-vm/#tutorial-steps-for-openssh-on-*nix-(linux/os-x/bsd)-or-cygwin">Tutorial Steps for OpenSSH *nix (Linux/OS X/BSD) or Cygwin</a>
        </li>
        <li><a href="/docs/guides/ssh-into-your-vm/#tutorial-steps-for-putty-on-windows">Tutorial Steps for PuTTY on Windows</a>
        </li>
        <li><a href="/docs/guides/ssh-into-your-vm/#possible-gotchas">Possible Gotchas</a>
        </li>
        <li><a href="/docs/guides/ssh-into-your-vm/#confirming-your-installation">Confirming your Installation</a>
        </li>
        <li><a href="/docs/guides/ssh-into-your-vm/#additional-resources">Additional resources</a>
        </li>
      </ul>
    </div>
    <div id="content">
      <article class="article">
        <section class="content"><p>In this tutorial, we will go over the steps to SSHing into your <span class="caps">VM</span>! This
is a semi-experimental tutorial, so if you have any problems please make
sure to
<a href="https://github.com/koding/docs/issues/new">submit an issue</a>
and we can help make this a rock solid tutorial for all skill levels&nbsp;:)</p>
<p><strong>Reminder</strong>: As with all of these tutorials, they assume that there are no
conflicts. If you have previously attempted to install this software please
remove it fully or understand that conflicts may occur. Thanks&nbsp;:)</p>
<h2 id="video">Video</h2>
<h3 id="*nix-(linux/os-x/bsd)-video">*nix (Linux/<span class="caps">OS</span> X/BSD)&nbsp;Video</h3>
<iframe width="680" height="450" src="//www.youtube.com/embed/9tsmL61HgXU" frameborder="0" allowfullscreen></iframe>

<h3 id="putty-video">PuTTY&nbsp;Video</h3>
<iframe width="680" height="450" src="//www.youtube.com/embed/hngKOMVptvU" frameborder="0" allowfullscreen></iframe>




<h2 id="what-you-will-need">What you will&nbsp;need</h2>
<p>In this tutorial, I am going to use the terminology of “Home” and “Koding”
machines. Home being whatever the machine you are using to connect to
Koding with. Koding being the machine that is receiving the connection.
<code>Home -&gt; Koding</code>.</p>
<p>On the Home machine, you will need your <span class="caps">SSH</span> public/private keys. On Linux (or
Cygwin on Windows), your SSH keys are usually found at <code>~/.ssh/id_rsa</code> and
<code>~/.ssh/id_rsa.pub</code>. On Windows (without Cygwin), you may need to generate new
keys with
<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTYGen</a>. If
you need to generate a new key pair, please refer to a
<a href="https://help.github.com/articles/generating-ssh-keys">Linux</a> or
<a href="http://katsande.com/using-puttygen-to-generate-ssh-private-public-keys">Windows</a>
tutorial, as appropriate.  You will also need your Koding Username, and your <span class="caps">VM</span>&nbsp;Number.</p>
<p>To find your <span class="caps">VM</span> number, review the <a href="/docs/guides/find-your-vm-number/">Find your <span class="caps">VM</span> Number</a>&nbsp;guide.</p>
<h2 id="tutorial-steps-for-openssh-on-*nix-(linux/os-x/bsd)-or-cygwin">Tutorial Steps for OpenSSH on *nix (Linux/<span class="caps">OS</span> X/BSD) or&nbsp;Cygwin</h2>
<ol>
<li><p>First, copy your Public Key, usually found in <code>~/.ssh/id_rsa.pub</code>, and copy
it in its entirety! It will look something like&nbsp;this:</p>
<pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCyhKankDE4DRM86JqZ3JPdWDeqg+TbzlqlTLf
OKTeokhRoMgy5WoMY/ZWUVES3d2vSHHwW3cwWlELmVdc3Ow57boZv3fOsPhybYHVRTClXYr1ncS
xyTvjvCfvV5q22aIxHPWQ353543ssda87sa+85XEa4VnveJsEzxBZl4oJ4GB0AGa48+UdIqutrg
Zu7D7JCK+Yl228X+3bJf3ddlqDaKaVXPivvvYqImK6ZwFsxh2lNO4E8IOd3OSK9zv6i+io8PxWm
wP0tLFokxulAI8Td1sOPBE9s9bdJ5c2T/GfGjKF+aNKsd33TsYEjjc/plMZmRRrOgQwre6OAkgM
vyV2X foo@bar.baz</code></pre>
</li>
<li><p>Next, paste this entire Public Key into your <span class="caps">SSH</span> Keys section of your
Account settings. This can be found by going to
<a href="https://koding.com/Account">Koding/Account</a> and clicking <span class="caps">SSH</span> Keys
under the DEVELOP. Click the Plus button on the right side of the page,
and paste your Public Key into this. Below is a screenshot of this area
for clarification.
<img src="/docs/guides/ssh-into-your-vm/sshkeys.png" alt="Koding SSH Keys"></p>
</li>
<li><p>Now go back to your Home machine, and create the file
<code>~/.ssh/config</code> <em>(assuming it&#39;s not already created)</em>. Add the following
code into that&nbsp;file:</p>
<pre><code>Host *.kd.io
 User &lt;username&gt;
 ProxyCommand ssh %r@ssh.koding.com nc %h %p</code></pre>
<p>Where <code>&lt;username&gt;</code> is your username, without the <code>&lt;&gt;</code>.</p>
</li>
<li><p>Next, on your Home machine and connect to your <span class="caps">VM</span>! This can be
done by typing: <code>ssh &lt;vm-Number&gt;.&lt;username&gt;.koding.kd.io</code>. An example,
here is my connection command: <code>ssh vm-0.leeolayvar.koding.kd.io</code>.</p>
<p>You will have to enter your local <span class="caps">SSH</span> password, if you chose one when you
created your key. After that, presented with <code>username@vm-X:~$</code>, signaling
that you have connected&nbsp;successfully.</p>
<p>This step has quite a few Gotchas so please review them&nbsp;below.</p>
<p>Two likely gotchas, are
<a href="/docs/guides/ssh-into-your-vm/#agent-admitted-failure?">Possible Gotchas: Agent Failure</a>
and
<a href="/docs/guides/ssh-into-your-vm/#ssh_exchange_identification-/-keep-koding-open-in-browser">Possible Gotchas: ssh_exchange_identification</a>&nbsp;below.</p>
</li>
</ol>
<h3 id="alternate-id_rsa">Alternate&nbsp;id_rsa</h3>
<p>  If you&#39;re using an alternately named <code>id_rsa</code> file, you can modify your
  config to support this with the following&nbsp;example.</p>
<pre><code>  Host *.kd.io
    User &lt;username&gt;
    IdentityFile ~/.ssh/alternate
    ProxyCommand ssh -i ~/.ssh/alternate %r@ssh.koding.com nc %h %p</code></pre>
<p>  Note the <code>IdentityFile ~/.ssh/alternate</code> and <code>-i ~/.ssh/alternate</code>,
  they tell <span class="caps">SSH</span> the location of your public key, and are required. Replace
  the file location with the location of your alternate&nbsp;key.</p>
<h2 id="tutorial-steps-for-putty-on-windows">Tutorial Steps for PuTTY on&nbsp;Windows</h2>
<p>For this connection method, you will need the <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">PuTTY <span class="caps">SSH</span> client suite</a>:
<code>putty.exe</code>, <code>plink.exe</code>, and <code>pageant.exe</code>.</p>
<p><strong>Note:</strong> This PuTTY guide has only recently been published. If you are
familiar with PuTTY and you think something should be changed, please
<a href="https://github.com/koding/docs/issues/new">let me know</a>!</p>
<ol>
<li><p>Copy the text contents of your PuTTY public key. If you are not sure what or
where it is, please refer to <a href="/docs/guides/ssh-into-your-vm/#what-you-will-need">What you will need</a>.</p>
</li>
<li><p>As in Step #2 of the <a href="/docs/guides/ssh-into-your-vm/#tutorial-steps-for-openssh-on-linux">Linux guide</a>
above, paste the entirety of your public key into the <em><span class="caps">SSH</span> Keys</em> section of
your Koding account&nbsp;settings.</p>
</li>
<li><p>Start up <code>putty.exe</code> and set the <em>Host Name (or <span class="caps">IP</span> address)</em> to the same <span class="caps">VM</span>
hostname as&nbsp;above:</p>
<p><code>vm-Number.&lt;username&gt;.koding.kd.io</code></p>
<p><img src="/docs/guides/ssh-into-your-vm/puttysession.png" alt="PuTTY session"></p>
</li>
<li><p>In the <em>Category</em> menu on the left, select <em>Data</em> under <em>Connection</em>. Enter
your Koding username in the <em>Auto-login username</em>&nbsp;box.</p>
</li>
<li><p>Select <em>Proxy</em> under <em>Connection</em>, and change the <em>Proxy type</em> to <em>Local</em>.
Enter the following line (modified for your system) in the <em>Telnet command,
or local proxy command</em>&nbsp;box:</p>
<p><code>C:\your\path\to\plink.exe &lt;username&gt;@ssh.koding.com -nc %host:%port</code></p>
<p><img src="/docs/guides/ssh-into-your-vm/puttyproxy.png" alt="PuTTY proxy"></p>
</li>
<li><p>Go back up to the <em>“Session”</em> settings and save this PuTTY
configuration to a new session by typing a name into the <em>“Saved Sessions”</em>
box, and clicking on <em>“Save”</em>.</p>
</li>
<li><p>In Step 7, we will cover setting up your Auth. This can be done two
ways, and we will cover both. <strong>You only need to do one</strong> method!
Pageant has been working for everyone, where as PuTTY-Auth has been
a bit problematic but is shorter. Choose whichever you like, but if you
have issues, try <a href="/docs/guides/ssh-into-your-vm/#pageant-auth">Pageant Auth</a>.</p>
<h3 id="pageant-auth">Pageant&nbsp;Auth</h3>
<p>Open <code>pageant.exe</code>. It will launch into your&nbsp;Taskbar.</p>
<p><img src="/docs/guides/ssh-into-your-vm/pageanttaskbar.png" alt="Pageant Taskbar"></p>
<p>Right click the Pageant icon in the taskbar, and select <em>“View Keys”</em>. From
there, click the <em>“Add Key”</em> button. Navigate to your PuTTYGen <strong>private</strong>
key and click <em>“Open”</em>. You should now have a key listed in your Pageant Key
List. An example image is&nbsp;below.</p>
<p><img src="/docs/guides/ssh-into-your-vm/pageantkeylist.png" alt="Pageant key List"></p>
<p>If your key has been added to the Pageant Key List, close the&nbsp;window.</p>
<h3 id="putty-auth">PuTTY&nbsp;Auth</h3>
<p>Reopen PuTTY and select your Session, then click&nbsp;Load.</p>
<p>Next, under the <em>Connection</em> menu, open up the <em><span class="caps">SSH</span></em> menu and select <em>Auth</em>.
Enable the <em>Allow agent forwarding</em> checkbox. Under <em>Private key file for
authentication</em>, browse to your PuTTYGen private&nbsp;key.</p>
<p><img src="/docs/guides/ssh-into-your-vm/puttyauth.png" alt="PuTTY SSH auth"></p>
<p>Next, Plink needs to know the explicit location of your key. So go back to
<em>“Proxy”</em> under <em>“Connection”</em> and look for the <em>“Telnet command,
or local proxy command”</em> box. Currently, it should look like&nbsp;this:</p>
<p><code>C:\your\path\to\plink.exe &lt;username&gt;@ssh.koding.com -nc %host:%port</code></p>
<p>Modify it, by adding your private key location. So, it will look like&nbsp;this:</p>
<p><code>C:\your\path\to\plink.exe -i c:\path\to\private\key.ppk &lt;username&gt;@ssh.koding.com -nc %host:%port</code></p>
</li>
<li><p>You&#39;re done! You can now connect to Koding via&nbsp;PuTTY.</p>
<p>To connect with Pageant, you can right click the Pageant
Icon, and under <em>“Saved Sessions”</em> click on your Saved Session. This
will automatically open up PuTTY and start&nbsp;connecting.</p>
<p>To connect from PuTTY itself, open PuTTY and select your Saved Session from
the list, then click&nbsp;Open.</p>
<p>An example of a successful Koding Connection is&nbsp;below.</p>
<p><img src="/docs/guides/ssh-into-your-vm/puttysuccess.png" alt="Success"></p>
</li>
</ol>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>If you have trouble connecting, try running the Plink proxy command in <code>verbose</code>
mode (<code>-v</code>) from a console (outside PuTTY itself). You&#39;ll need to manually specify the
private key with <code>-i</code>.</p>
<p><code>&gt; C:\path\to\plink.exe -v -i c:\path\to\private\key.ppk &lt;username&gt;@ssh.koding.com -nc vm-Number.&lt;username&gt;.koding.kd.io:22</code></p>
<p>If it ends with a line resembling <code>SSH-2.0-OpenSSH_5.9p1</code> then your connection
should be good, and the problem is likely&nbsp;elsewhere.</p>
<h2 id="confirming-your-installation">Confirming your&nbsp;Installation</h2>
<p>The best way to confirm your installation is simply by connecting to your
Koding <span class="caps">VM</span>. For information on this, see Step #3&nbsp;above.</p>
<h2 id="possible-gotchas">Possible&nbsp;Gotchas</h2>
<h3 id="agent-admitted-failure?">Agent admitted&nbsp;failure?</h3>
<p>If you receive an error when you attempt to connect, matching the following&nbsp;description:</p>
<pre><code>Agent admitted failure to sign using the key.</code></pre>
<p>Then run the command <code>ssh-add</code>. For additional information on this gotcha,
see the
<a href="https://help.github.com/articles/error-agent-admitted-failure-to-sign">Github Help Page</a>
on the&nbsp;subject.</p>
<h3 id="ssh_exchange_identification-/-keep-koding-open-in-browser">ssh_exchange_identification / Keep Koding Open in&nbsp;Browser</h3>
<p>Until Always-On VMs are available, Koding will shut down your <span class="caps">VM</span> after
approximately ~20 minutes. To ensure that you are able to connect properly
make sure you have your browser open <strong>and logged in</strong> to&nbsp;Koding.com.</p>
<p>If you experience the following&nbsp;error:</p>
<pre><code>ssh_exchange_identification: Connection closed by remote host</code></pre>
<p>Your <span class="caps">VM</span> being “off” is the most likely culprit. You can ensure it is on by
visiting its direct url, such as <a href="http://vm-0.username.kd.io">http://vm-0.username.kd.io</a>, and ensuring
you are presented with your Hello World Apache response. If you receive
an error indicating that <span class="caps">VM</span> does not exist or is not on, you should have a
good idea why SSH is failing to&nbsp;connect.</p>
<p>If your <span class="caps">VM</span> is toggled off, it can be turned on by going to
<a href="https://koding.com/Develop">koding/Develop</a> and looking for your <span class="caps">VM</span> under
<strong>Your Environments</strong>, in the lower left. An image is below for reference:
<img src="/docs/guides/ssh-into-your-vm/onvm.png" alt="Make sure VM is ON"></p>
<h3 id="~/.ssh/authorized_keys">~/.ssh/authorized_keys</h3>
<p>You do <em>not</em> need to use authorized_keys in the Koding VMs. The
Account Settings -&gt; <span class="caps">SSH</span> Keys takes care of the authorization for&nbsp;you.</p>
<h2 id="additional-resources">Additional&nbsp;Resources</h2>
<ul>
<li><a href="https://help.github.com/articles/error-agent-admitted-failure-to-sign">Agent Failure&nbsp;Information</a></li>
</ul>
</section>
      </article>
    </div>
    <footer>
      <div class="nav"><a href="">« Back to Home</a></div>
      <section class="about"><h4 id="having-trouble,-or-is-something-outdated?">Having Trouble, or Is Something Outdated?</h4>
<p>Koding changes quite rapidly, so if one of these guides are outdated,
or if something just doesn&#39;t quite make sense to you, please
<a href="https://github.com/koding/docs/issues/new">submit an issue</a> on the matter. Doing this will help me keep these guides
up to date, and help any Koders using these guides after you. Thanks!</p>

        <div class="credits"> This guide was created by <span class="author"><a href="https://github.com/leeolayvar">Lee Olayvar</a></span> with contributions by <span class="contributor"><a href="http://ramblinations.com">Gemma Lynn (ellotheth)</a></span>
        </div>
      </section>
      <section class="copy">
        <p>created on&nbsp;<a href="https://koding.com">Koding</a>&nbsp;and powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a></p>
      </section>
    </footer>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-6520910-12', 'koding.github.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>